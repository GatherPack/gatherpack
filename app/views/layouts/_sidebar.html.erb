<div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-body-tertiary">
  <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
    <div class="offcanvas-header">
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
      <div class="nav flex-column me-auto">
        <% if current_user != true_user %>
          <div class="nav-item d-flex align-items-center px-3 impersonator">
            <%= image_tag(get_avatar_url(true_user.person.avatar), class: 'person-img', style: 'height: 2em; width: auto;') %>
            <%= link_to true_user.person.identifier_name, true_user.person %>
          </div>
          <div class="nav-item px-3 text-center w-100 impersonator-label">
            impersonating
          </div>
        <% end %>
        <div class="nav-item d-flex align-items-center px-3 <%= "impersonator" if current_user != true_user %>">
          <%= image_tag(get_avatar_url(current_user.person.avatar), class: 'person-img', style: 'height: 2em; width: auto;') %>
          <%= link_to current_user.person.identifier_name, current_user.person %>
        </div>
        <% if current_user != true_user %>
          <div class="nav-item d-flex align-items-center px-3 pt-1 impersonator">
            <%= button_to "Stop Impersonating", stop_impersonating_people_path, data: {turbo: false}, class: 'btn btn-danger btn-sm w-100' %>
          </div>
        <% end %>

        <hr class="my-2">

        <%= nav_link 'Dashboard', root_path, 'flag' %>
        <%= nav_link 'Sign Out', destroy_user_session_path, 'person-through-window', method: 'delete' %>
      
        <hr class="my-2">

        <%= nav_heading 'People' %>

        <%= nav_link 'People', people_path, 'users' %>
        <%= nav_link 'Teams', teams_path, 'people-group' %>
        <%= nav_link 'Badges', badges_path, 'certificate' %>
        <%= nav_link 'Tokens', tokens_path, 'id-badge' %>

        <%= nav_heading 'Time' %>

        <%= nav_link 'Calendar', calendar_index_path, 'calendar' %>
        <%= nav_link 'Time Clock', time_clock_punches_path, 'business-time' %>
        
        <%= nav_heading 'Finance' %>

        <%= nav_link 'Ledgers', ledgers_path, 'receipt' %>
        <%= nav_link 'Budgets', budgets_path, 'wallet' %>

        <%= nav_heading 'Communication' %>
        
        <%= nav_link 'Mailboxes', mailboxes_path, 'inbox' %>

        <%= nav_heading 'Content' %>

        <%= nav_link 'Announcements', announcements_path, 'comment' %>
        <%= nav_link 'Pages', pages_path, 'file-lines' %>
        <%= nav_link 'Shortcuts', shortcuts_path, 'link' %>

        <% if admin? %>
          <hr class="my-2">

          <%= nav_heading 'Automation' %>

          <%= nav_link 'Variables', variables_path, 'database' %>
          <%= nav_link 'Reports', reports_path, 'file-code' %>
          <%= nav_link 'Hooks', hooks_path, 'timeline' %>

          <%= nav_heading 'Setup' %>

          <%= nav_link 'Setup', setup_path, 'cogs' %>

          <%= nav_heading 'Logs' %>

          <%= nav_link 'Audit Log', audit_logs_path, 'file-circle-check' %>
        <% end %>
      </div>
    </div>
  </div>
</div>
